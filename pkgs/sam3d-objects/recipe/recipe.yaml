# Recipe for SAM 3D Objects - 3D object generation from Meta FAIR
# https://github.com/facebookresearch/sam-3d-objects

context:
  version: "0.0.1"
  commit: "81a82373a3a7f4cbb00bd5b32aaf6b4d0f659ddd"

package:
  name: sam3d-objects
  version: ${{ version }}

source:
  url: https://github.com/facebookresearch/sam-3d-objects/archive/${{ commit }}.tar.gz
  sha256: 6dda92acee2397369daeb56572ba4db043f7ad62b6eb269de5af1dfd647d7641

build:
  number: 0
  noarch: python
  script:
    content: |
      ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation

requirements:
  host:
    - python >=3.12
    - pip
    - hatchling
    - hatch-requirements-txt
  run:
    - python >=3.12
    # Core
    - pytorch
    - torchvision
    - numpy
    - pillow
    - tqdm
    - loguru
    - scipy
    # Config / training
    - omegaconf
    - hydra-core
    - lightning
    - safetensors
    - optree
    - timm
    # 3D / geometry
    - pytorch3d
    - trimesh
    - plyfile
    - pyvista
    - pymeshfix
    - python-igraph
    # Visualization
    - matplotlib
    - plotly
    - seaborn
    - imageio
    - opencv
    # Mono depth / misc 3D
    - utils3d
    - moge
    - pipeline
    # Misc
    - astor
    - easydict
    - huggingface_hub
    # Sparse convolution
    - spconv
    # 3D / GPU acceleration
    - gsplat
    - kaolin
    - open3d
    - flash-attn
    - xatlas-python

tests:
  - script:
      - LIDRA_SKIP_INIT=1 python -c "import sam3d_objects"

about:
  homepage: https://github.com/facebookresearch/sam-3d-objects
  license: Apache-2.0
  license_file: LICENSE
  summary: SAM 3D Objects - 3D object generation from Meta FAIR
  repository: https://github.com/facebookresearch/sam-3d-objects

extra:
  recipe-maintainers:
    - lllangWV
